# How it works

Open Lavatory establishes a link through a **two phase process**;

First a handshake-like process occurs on public or user-configured infrastructure, we call this process [signaling](/api/signaling).
Through this connection public keys are exchanged.

From then on communication is handled by the [transport](/api/transport) layer.
Through direct communication between the two devices or a relayed process.

## Signaling

There are currently three signaling protocols supported; [MQTT](/api/signaling/mqtt), [Ntfy](/api/signaling/ntfy) and [Gun](/api/signaling/gun).
All of which have public infrastructure available for use, but also allow for self-hosting.

| Protocol | Description |
|----------|-------------|
| [MQTT](/api/signaling/mqtt) | A lightweight pub-sub protocol used for IoT and messaging |
| [Ntfy](/api/signaling/ntfy) | A simple http-based push notification protocol |
| [Gun](/api/signaling/gun) | A decentralized database for data retrieval |
| Waku (not implemented) | A p2p messaging protocol |
| Nostr (not implemented) | A p2p social layer |

:::info
Depending on configuration the signaling layer can also be configured for transportation.
This allows for a mailbox style design where the signaling layer is used to deliver messages.
:::

## Transport

Currently the only transport protocol supported is [WebRTC](/api/transport/webrtc).

| Protocol | Description |
|----------|-------------|
| [WebRTC](/api/transport/webrtc) | A p2p messaging protocol for sending and receiving messages between devices |

Ideally at some point we support direct transport layer communication through [WebHID](), [WebUSB](), [WebSerial]() and [WebBluetooth]().
